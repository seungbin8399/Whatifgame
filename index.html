<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ìƒê°ì˜ ë°”ë‹¤ â€” ê°„ë‹¨ ì§„í–‰íˆ´</title>
  <style>
    :root{--bg:#0b1020;--card:#121a2f;--text:#eaf0ff;--border:rgba(255,255,255,.08);--muted:#a9b8ff;--chip:#0e1530;--accent:#5eead4}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Apple SD Gothic Neo","Malgun Gothic",sans-serif;background:var(--bg);color:var(--text);position:relative;overflow-x:hidden}
    /* floating bg canvas */
    #bg{position:fixed;inset:0;z-index:-1}
    .wrap{max-width:900px;margin:0 auto;padding:18px}
    h1{font-size:clamp(22px,3.2vw,32px);margin:0 0 8px}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px;margin:10px 0;backdrop-filter:saturate(120%) blur(2px)}
    button{background:#2a3a6a;color:var(--text);border:1px solid var(--border);padding:9px 12px;border-radius:10px;cursor:pointer}
    button.ghost{background:transparent}
    button.accent{background:#145a56}
    textarea, input{width:100%;background:#0f1630;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px}
    .muted{color:var(--muted);font-size:13px}
    ul{margin:8px 0 0 18px}
    .grid{display:grid;gap:10px}
    .two{grid-template-columns:1fr 1fr}
    @media (max-width:780px){.two{grid-template-columns:1fr}}
    .list{display:flex;flex-wrap:wrap;gap:6px}
    .chip{border:1px solid var(--border);padding:5px 8px;border-radius:999px;background:var(--chip)}
    .mono{font-family:ui-monospace,Menlo,monospace}
    /* export image preview (optional hidden) */
    #exportPreview{display:none}
  </style>
</head>
<body>
  <canvas id="bg"></canvas>
  <div class="wrap">
    <h1>ğŸŒŠ ìƒê°ì˜ ë°”ë‹¤ â€” ê°„ë‹¨ ì§„í–‰íˆ´</h1>
    <p class="muted">ë°¸ëŸ°ìŠ¤ê²Œì„ ë½‘ê¸° Â· í‚¤ì›Œë“œ ë½‘ê¸° Â· ì¡° ì„ê¸°(4ì¸ 1ì¡°). ë¡œì»¬ì—ì„œë§Œ ë™ì‘, ì„¤ì¹˜/ë¡œê·¸ì¸ ì—†ì´ ì‚¬ìš©.</p>

    <!-- ë°¸ëŸ°ìŠ¤ê²Œì„ -->
    <section class="card">
      <h2>1) ë°¸ëŸ°ìŠ¤ê²Œì„ ì£¼ì œ ë½‘ê¸°</h2>
      <div class="row">
        <button id="pickBG">ë¬´ì‘ìœ„ 1ê°œ ë½‘ê¸°</button>
        <button id="pickBG3" class="ghost">ë¬´ì‘ìœ„ 3ê°œ</button>
        <button id="copyBG" class="ghost">ë³µì‚¬</button>
      </div>
      <div id="bgResult" class="list" style="margin-top:8px"></div>
      <details style="margin-top:10px">
        <summary class="muted">ê¸°ë³¸ ì§ˆë¬¸ ë³´ê¸° / ìˆ˜ì •</summary>
        <ul id="bgPreview"></ul>
      </details>
    </section>

    <!-- í‚¤ì›Œë“œ í† ë¡  -->
    <section class="card">
      <h2>2) í‚¤ì›Œë“œ í† ë¡  ì£¼ì œ ë½‘ê¸°</h2>
      <div class="row">
        <button id="pickKW2">ë¬´ì‘ìœ„ 2ê°œ</button>
        <button id="pickKW1" class="ghost">ë¬´ì‘ìœ„ 1ê°œ</button>
        <button id="copyKW" class="ghost">ë³µì‚¬</button>
      </div>
      <div id="kwResult" class="list" style="margin-top:8px"></div>
      <details style="margin-top:10px">
        <summary class="muted">ê¸°ë³¸ í‚¤ì›Œë“œ/ì§ˆë¬¸ ë³´ê¸°</summary>
        <ul id="kwPreview"></ul>
      </details>
    </section>

    <!-- ì¡° ì„ê¸° -->
    <section class="card">
      <h2>3) ì¡° ì„ê¸° (4ì¸ 1ì¡°)</h2>
      <div class="grid two">
        <div>
          <label class="muted">ì°¸ì—¬ì (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)</label>
          <textarea id="names" rows="8"></textarea>
          <div class="row" style="margin-top:8px">
            <button id="shuffle">ì„ì–´ì„œ ë°°ì •</button>
            <button id="copyTeams" class="ghost">ê²°ê³¼ ë³µì‚¬</button>
            <button id="saveImage" class="accent">ì´ë¯¸ì§€ë¡œ ì €ì¥</button>
          </div>
          <p class="muted">â€» ì¸ì›ìˆ˜ 4ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ì§€ ì•Šìœ¼ë©´ ë§ˆì§€ë§‰ ì¡°ëŠ” 3ëª…ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.</p>
        </div>
        <div>
          <div id="teams"></div>
        </div>
      </div>
      <canvas id="exportPreview" width="1200" height="800"></canvas>
    </section>

    <p class="muted">Â© ìƒê°ì˜ ë°”ë‹¤ â€” ì‹¬í”Œ ë²„ì „</p>
  </div>

  <script>
    // ===== BG FLOATING CANVAS =====
    (function(){
      const c=document.getElementById('bg');
      const ctx=c.getContext('2d');
      const DPR= Math.max(1, window.devicePixelRatio||1);
      let W,H,particles=[];
      function resize(){
        W = c.width = Math.floor(innerWidth*DPR);
        H = c.height= Math.floor(innerHeight*DPR);
        c.style.width = innerWidth+'px';
        c.style.height= innerHeight+'px';
        spawn();
      }
      function spawn(){
        const count = Math.min(120, Math.floor((innerWidth*innerHeight)/12000));
        particles = Array.from({length:count}).map(()=>({
          x: Math.random()*W,
          y: Math.random()*H,
          r: (Math.random()*2+0.6)*DPR,
          a: Math.random()*Math.PI*2,
          s: Math.random()*0.5+0.2,
          hue: 210 + Math.random()*40
        }));
      }
      function step(){
        ctx.clearRect(0,0,W,H);
        for(const p of particles){
          p.a += 0.003 + p.s*0.002;
          p.y -= (0.2 + p.s)*DPR;
          p.x += Math.cos(p.a)*0.6*DPR;
          if(p.y < -10*DPR){ p.y = H+10*DPR; p.x = Math.random()*W; }
          ctx.beginPath();
          ctx.fillStyle = `hsla(${p.hue},70%,70%,0.08)`;
          ctx.arc(p.x,p.y,p.r*6,0,Math.PI*2);
          ctx.fill();
          ctx.beginPath();
          ctx.fillStyle = `hsla(${p.hue},80%,75%,0.25)`;
          ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
          ctx.fill();
        }
        requestAnimationFrame(step);
      }
      addEventListener('resize', resize);
      resize();
      step();
    })();

    // ===== ë°ì´í„° =====
    const BG = [
      ["í˜ë“¤ì–´ë„ â€œê´œì°®ì•„â€ í•˜ë©° ë²„í‹°ëŠ” ì‚¶" , "í˜ë“¤ë©´ ì†”ì§í•˜ê²Œ â€œëª» í•˜ê² ë‹¤â€ ë§í•˜ëŠ” ì‚¶"],
      ["ì§„ì§œ ë‚˜ë¥¼ ë³´ì—¬ì£¼ê³  ì™¸ë©´ë‹¹í•˜ê¸°","ê°€ì§œ ë‚˜ë¥¼ ë³´ì—¬ì£¼ê³  ì¸ì •ë°›ê¸°"],
      ["ë‚´ê°€ ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒê³¼ë§Œ ë‚¨ëŠ” ì„¸ìƒ","ë‚˜ë¥¼ ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒê³¼ë§Œ ë‚¨ëŠ” ì„¸ìƒ"],
      ["ëª¨ë“  ì‚¬ëŒì—ê²Œ í˜¸ê°í˜•","ë‹¨ í•œ ì‚¬ëŒì—ê²Œë§Œ ì§„ì‹¬ìœ¼ë¡œ ì‚¬ë‘ë°›ìŒ"],
      ["ì—¬ë¦„ì—ë§Œ ì‚´ê¸°","ê²¨ìš¸ì—ë§Œ ì‚´ê¸°"],
      ["ë‚´ê°€ ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒì´ ë¨¼ì € ì„¸ìƒì„ ë– ë‚˜ëŠ” ê²ƒ, ë‚´ê°€ ë¨¼ì € ì„¸ìƒì„ ë– ë‚˜ëŠ” ê²ƒ"],
      ["í–‰ë³µì€ ì„ íƒí•  ìˆ˜ ìˆëŠ” ê²ƒ","í–‰ë³µì€ ìš°ì—°íˆ ì°¾ì•„ì˜¤ëŠ” ê²ƒ"],
      ["ê³¼ê±°ë¡œ ì‹œê°„ì—¬í–‰","ë¯¸ë˜ë¡œ ì‹œê°„ì—¬í–‰"],
      ["ì‚¬ë‘ ì—†ëŠ” ê²°í˜¼","ëˆ ì—†ëŠ” ê²°í˜¼"],
      ["í‰ìƒ íƒì‹œ ë¬´ë£Œ","í‰ìƒ ë¹„í–‰ê¸° ë¬´ë£Œ"],
      ["ì¢…ê°• ëŠ¦ê²Œí•˜ëŠ” ìˆ˜ì—…","ê³¼ì œ ë§ê³  íŒ€í”Œ ë§ì€ ìˆ˜ì—…"],
      ["íŒ€í”Œ ë¬´ì„ìŠ¹ì°¨ íŒ€ì› ë§Œë‚˜ê¸°","íŒ€í”Œ ë¦¬ë” ë§¡ì•„ì„œ ë‹¤ ë– ì•ˆê¸°"],
      ["í•œêµ­ ì‚¬íšŒì˜ ê¸°ëŒ€ì— ë§ì¶° ì‚´ê¸°","ë‚´ ê°€ì¹˜ê´€ëŒ€ë¡œ ì‚´ì§€ë§Œ ë¹„ë‚œë°›ê¸°"],
      ["ì‚¬ì†Œí•œ ë§ì¶¤ë²•ë„ í‹€ë¦¬ëŠ” ì• ì¸","ì‚¬ì†Œí•œ ë§ì¶¤ë²•ë„ ì§€ì í•˜ëŠ” ì• ì¸"],
      ["ê³µê³µì¥ì†Œì—ì„œë„ ìŠ¤í‚¨ì‹­í•˜ëŠ” ì• ì¸","ì† ë‹¿ìœ¼ë©´ í„ì© ë›°ì–´ ë„ë§ê°€ëŠ” ì• ì¸"]
      
    ];

    const KW = [
      {name:'í–‰ë³µ', qs:['í–‰ë³µì€ ëˆìœ¼ë¡œ ì‚´ ìˆ˜ ìˆë‚˜ìš”?','ê°€ì¥ ìµœê·¼ì˜ ì†Œì†Œí•œ í–‰ë³µì€?']},
      {name:'ëˆ', qs:['ëˆì€ ììœ ë¥¼ ì£¼ë‚˜ìš”, êµ¬ì†í•˜ë‚˜ìš”?','ì–¼ë§ˆê°€ ìˆìœ¼ë©´ â€œì¶©ë¶„â€í•œê°€ìš”?']},
      {name:'ììœ ', qs:['ììœ ëŠ” ë¬´ì—‡ì˜ ë¶€ì¬ì¸ê°€ìš”?','ììœ ì™€ ì±…ì„ì˜ ê· í˜•ì€?']},
      {name:'ê´€ê³„', qs:['ê´€ê³„ê°€ ë‚˜ë¥¼ êµ¬ì†í•œë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?','ì¢‹ì€ ê´€ê³„ì˜ ìµœì†Œì¡°ê±´ì€?']},
      {name:'ì£½ìŒ', qs:['ì£½ìŒ ì¸ì‹ì´ ì‚¶ì„ ì–´ë–»ê²Œ ë°”ê¾¸ë‚˜ìš”?','ì„ì¢… ë•Œ ê°€ì¥ í›„íšŒí•  ì¼ì€?']},
      {name:'ì‚¬ë‘', qs:['ì‚¬ë‘ì€ ê°ì •ì¸ê°€ìš”, ì„ íƒì¸ê°€ìš”?','ì‚¬ë‘ì€ í‰ìƒ ì§€ì†ë  ìˆ˜ ìˆì„ê¹Œìš”?']},
      {name:'ì •ì²´ì„±', qs:['ë‚˜ëŠ” â€œë‚˜ë‹¤ì›€â€ì„ ì–´ë–»ê²Œ ì •ì˜í•˜ë‚˜ìš”?','ì •ì²´ì„±ì€ ê³ ì •ëœ ê²ƒì¼ê¹Œìš”, ë³€í™”í•˜ëŠ” ê²ƒì¼ê¹Œìš”?']},
      {name:'ê¸°ì–µ', qs:['ê¸°ì–µì´ ê³§ ë‚˜ì¸ê°€ìš”?','í–‰ë³µí–ˆë˜ ìˆœê°„ê³¼ í˜ë“¤ì—ˆë˜ ìˆœê°„, ë¬´ì—‡ì´ ë” ë‚˜ë¥¼ í˜•ì„±í•˜ë‚˜ìš”?']}
    ];

    // ===== ìœ í‹¸ =====
    const $ = (sel, root=document) => root.querySelector(sel);
    function shuffleArray(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }
    function copyText(t){ navigator.clipboard.writeText(t).then(()=> alert('ë³µì‚¬ ì™„ë£Œ!')); }

    // ===== ë°¸ëŸ°ìŠ¤ê²Œì„ =====
    function renderBGPreview(){
      const ul = $('#bgPreview'); if(!ul) return; ul.innerHTML='';
      BG.forEach((q,i)=>{ const li=document.createElement('li'); li.textContent = `Q${i+1}. ${q[0]}  vs  ${q[1]}`; ul.appendChild(li); });
    }
    function pickBG(n=1){
      const picks = shuffleArray(BG).slice(0,n);
      const holder = $('#bgResult'); if(holder){ holder.innerHTML='';
        picks.forEach(([a,b],i)=>{
          const div=document.createElement('div'); div.className='chip';
          div.textContent = `Q${i+1}: ${a}  vs  ${b}`;
          holder.appendChild(div);
        });
      }
      return picks.map(([a,b],i)=>`Q${i+1}: ${a} vs ${b}`).join('\n');
    }

    // ===== í‚¤ì›Œë“œ =====
    function renderKWPreview(){
      const ul = $('#kwPreview'); if(!ul) return; ul.innerHTML='';
      KW.forEach((k)=>{
        const li=document.createElement('li');
        li.innerHTML = `<strong>${k.name}</strong> â€” ${k.qs.join(' / ')}`;
        ul.appendChild(li);
      });
    }
    function pickKW(n=2){
      const picks = shuffleArray(KW).slice(0,n);
      const holder = $('#kwResult'); if(holder){ holder.innerHTML='';
        picks.forEach((k)=>{
          const div=document.createElement('div'); div.className='chip';
          div.textContent = `${k.name}: ${k.qs[0]}`;
          holder.appendChild(div);
        });
      }
      return picks.map(k=>`${k.name}: ${k.qs.join(' / ')}`).join('\n');
    }

    // ===== ì¡° ì„ê¸° (4ì¸ 1ì¡°) =====
    const DEFAULT_NAMES = [
      'ìœ ìŠ¹ë¹ˆ','ê¹€ìƒê¶Œ','ê¶Œë™êµ­','ë°•ìœ ì •','ë³€ì„œí˜¸','ì†ê°€ì€','ì‹¬ì›ì„­','ì´ì´ê°•','ì´ì£¼ì€','ì •ìš©ì§„','ìµœìŠ¹ì•„','í•˜ê²½ë•','ì˜¤ìŠ¹ë¹ˆ','ìœ ì§„','ì´ëª…ë¹„','ì´ì¢…í™”','ê¹€í™˜í¬','ì‹ ì¬ë¯¼','ìµœìœ ë¦¬'
    ];

    function groupByFour(list){
      const shuffled = shuffleArray(list.filter(x=>x && x.trim()));
      const teams=[]; for(let i=0;i<shuffled.length;i+=4){ teams.push(shuffled.slice(i,i+4)); }
      return teams;
    }

    function renderTeams(teams){
      const root = $('#teams'); if(!root) return; root.innerHTML='';
      teams.forEach((t,idx)=>{
        const box=document.createElement('div'); box.className='card';
        const title=document.createElement('div'); title.innerHTML = `<strong>${idx+1}ì¡°</strong> <span class="muted">(${t.length}ëª…)</span>`;
        const ul=document.createElement('ul'); t.forEach(n=>{ const li=document.createElement('li'); li.textContent=n; ul.appendChild(li); });
        box.appendChild(title); box.appendChild(ul); root.appendChild(box);
      });
      if(teams.length && teams[teams.length-1].length!==4){
        const p=document.createElement('p'); p.className='muted';
        p.textContent='ë§ˆì§€ë§‰ ì¡°ëŠ” 3ëª…ì…ë‹ˆë‹¤. í•„ìš” ì‹œ ì§„í–‰ì/ê²ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì¡° í•©ì¹˜ê¸°ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.';
        root.appendChild(p);
      }
    }

    // ===== íŒ€ ì´ë¯¸ì§€ë¡œ ì €ì¥ (ìº”ë²„ìŠ¤ ë Œë”ë§) =====
    function roundRect(ctx, x, y, w, h, r){
      const rr = Math.min(r, w/2, h/2);
      ctx.beginPath();
      ctx.moveTo(x+rr, y);
      ctx.arcTo(x+w, y, x+w, y+h, rr);
      ctx.arcTo(x+w, y+h, x, y+h, rr);
      ctx.arcTo(x, y+h, x, y, rr);
      ctx.arcTo(x, y, x+w, y, rr);
      ctx.closePath();
    }

    function exportTeamsImage(){
      const boxes = Array.from($('#teams').querySelectorAll('.card'));
      if(!boxes.length){ alert('ë¨¼ì € ì„ê¸°ë¥¼ ëˆŒëŸ¬ íŒ€ì„ ë§Œë“¤ì–´ìš”!'); return; }
      const canvas = document.getElementById('exportPreview');
      const ctx = canvas.getContext('2d');
      // Layout calc
      const W = 1200; // fixed width
      const P = 40;   // outer padding
      const COL = 2;  // columns
      const GAP = 24; // gap between cards
      const cardW = Math.floor((W - P*2 - GAP*(COL-1)) / COL);
      // compute height by content
      const namesPerBox = boxes.map(b=> b.querySelectorAll('li').length);
      const rows = Math.ceil(boxes.length / COL);
      const cardHByIdx = namesPerBox.map(n=> 80 + n*34 + 16);
      const rowHeights = Array.from({length:rows}).map((_,r)=>{
        const i1 = r*COL, i2 = i1+1;
        return Math.max(cardHByIdx[i1]||120, cardHByIdx[i2]||120);
      });
      const H = P*2 + rowHeights.reduce((a,b)=>a+b,0) + GAP*(rows-1) + 60;
      canvas.width = W; canvas.height = H;

      // bg gradient
      const grad = ctx.createLinearGradient(0,0,W,H);
      grad.addColorStop(0,'#0b1020');
      grad.addColorStop(1,'#172244');
      ctx.fillStyle = grad; ctx.fillRect(0,0,W,H);

      // title
      ctx.fillStyle = '#eaf0ff';
      ctx.font = 'bold 28px "Pretendard", "Malgun Gothic", system-ui';
      ctx.fillText('ìƒê°ì˜ ë°”ë‹¤ â€” ì¡° í¸ì„±', P, 46);
      ctx.font = '14px "Pretendard", "Malgun Gothic", system-ui';
      const now = new Date();
      ctx.fillText(now.toLocaleString(), W-P-260, 46);

      // draw cards
      let y = P+40;
      boxes.forEach((box,i)=>{
        const col = i % COL; const row = Math.floor(i / COL);
        const x = P + col*(cardW+GAP);
        if(col===0 && i>0){ y += (rowHeights[row-1]||120) + GAP; }
        const names = Array.from(box.querySelectorAll('li')).map(li=>li.textContent);
        const title = box.querySelector('strong')?.textContent || `${i+1}ì¡°`;
        const cardH = cardHByIdx[i];
        // card bg
        ctx.globalAlpha = 1;
        ctx.fillStyle = 'rgba(255,255,255,0.06)';
        roundRect(ctx,x,y,cardW,cardH,14); ctx.fill();
        ctx.strokeStyle = 'rgba(255,255,255,0.12)'; ctx.stroke();
        // title
        ctx.fillStyle = '#cfe1ff';
        ctx.font = '600 18px "Pretendard", "Malgun Gothic", system-ui';
        ctx.fillText(`${title} (${names.length}ëª…)`, x+18, y+32);
        // names
        ctx.fillStyle = '#eaf0ff';
        ctx.font = '16px "Pretendard", "Malgun Gothic", system-ui';
        names.forEach((n,idx2)=>{
          ctx.fillText(`â€¢ ${n}`, x+22, y+64 + idx2*28);
        });
      });

      // download
      const url = canvas.toDataURL('image/png');
      const a = document.createElement('a');
      a.href = url; a.download = 'ìƒê°ì˜ë°”ë‹¤_ì¡°í¸ì„±.png';
      document.body.appendChild(a); a.click(); a.remove();
    }

    // ===== ì´ˆê¸°í™” =====
    function renderKWPreview(){
      const ul = $('#kwPreview'); if(!ul) return; ul.innerHTML='';
      KW.forEach((k)=>{
        const li=document.createElement('li');
        li.innerHTML = `<strong>${k.name}</strong> â€” ${k.qs.join(' / ')}`;
        ul.appendChild(li);
      });
    }

    function init(){
      const namesBox = $('#names'); if(namesBox) namesBox.value = DEFAULT_NAMES.join('\n');
      renderBGPreview();
      renderKWPreview();

      const pickBGBtn = $('#pickBG'); if(pickBGBtn) pickBGBtn.addEventListener('click', ()=> pickBG(1));
      const pickBG3Btn = $('#pickBG3'); if(pickBG3Btn) pickBG3Btn.addEventListener('click', ()=> pickBG(3));
      const copyBGBtn = $('#copyBG'); if(copyBGBtn) copyBGBtn.addEventListener('click', ()=> copyText($('#bgResult').textContent.trim()));

      const pickKW2Btn = $('#pickKW2'); if(pickKW2Btn) pickKW2Btn.addEventListener('click', ()=> pickKW(2));
      const pickKW1Btn = $('#pickKW1'); if(pickKW1Btn) pickKW1Btn.addEventListener('click', ()=> pickKW(1));
      const copyKWBtn = $('#copyKW'); if(copyKWBtn) copyKWBtn.addEventListener('click', ()=> copyText($('#kwResult').textContent.trim()));

      const shuffleBtn = $('#shuffle'); if(shuffleBtn) shuffleBtn.addEventListener('click', ()=>{
        const names = $('#names').value.split(/\n|,|;/).map(x=>x.trim()).filter(Boolean);
        const teams = groupByFour(names);
        renderTeams(teams);
      });
      const copyTeamsBtn = $('#copyTeams'); if(copyTeamsBtn) copyTeamsBtn.addEventListener('click', ()=>{
        const boxes = Array.from($('#teams').querySelectorAll('.card'));
        if(!boxes.length){ alert('ë¨¼ì € ì„ê¸°ë¥¼ ëˆŒëŸ¬ íŒ€ì„ ë§Œë“¤ì–´ìš”!'); return; }
        const lines = boxes.map((box,i)=>{
          const who = Array.from(box.querySelectorAll('li')).map(li=>li.textContent).join(', ');
          const cnt = box.querySelector('.muted').textContent.replace(/[()ëª…]/g,'');
          return `${i+1}ì¡° (${cnt}ëª…): ${who}`;
        }).join('\n');
        copyText(lines);
      });
      const saveBtn = $('#saveImage'); if(saveBtn) saveBtn.addEventListener('click', exportTeamsImage);
    }

    if(document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>
