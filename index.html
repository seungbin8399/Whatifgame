<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>생각의 바다 — 간단 진행툴</title>
  <style>
    :root{--bg:#0b1020;--card:#121a2f;--text:#eaf0ff;--border:rgba(255,255,255,.08);--muted:#a9b8ff;}
    *{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Apple SD Gothic Neo","Malgun Gothic",sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:900px;margin:0 auto;padding:18px}
    h1{font-size:clamp(22px,3.2vw,32px);margin:0 0 8px}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px;margin:10px 0}
    button{background:#2a3a6a;color:var(--text);border:1px solid var(--border);padding:9px 12px;border-radius:10px;cursor:pointer}
    button.ghost{background:transparent}
    textarea, input{width:100%;background:#0f1630;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px}
    .muted{color:var(--muted);font-size:13px}
    ul{margin:8px 0 0 18px}
    .grid{display:grid;gap:10px}
    .two{grid-template-columns:1fr 1fr}
    @media (max-width:780px){.two{grid-template-columns:1fr}}
    .list{display:flex;flex-wrap:wrap;gap:6px}
    .chip{border:1px solid var(--border);padding:5px 8px;border-radius:999px;background:#0e1530}
    .mono{font-family:ui-monospace,Menlo,monospace}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>🌊 생각의 바다 — 간단 진행툴</h1>
    <p class="muted">밸런스게임 뽑기 · 키워드 뽑기 · 조 섞기(4인 1조). 로컬에서만 동작, 설치/로그인 없이 사용.</p>

    <!-- 밸런스게임 -->
    <section class="card">
      <h2>1) 밸런스게임 주제 뽑기</h2>
      <div class="row">
        <button id="pickBG">무작위 1개 뽑기</button>
        <button id="pickBG3" class="ghost">무작위 3개</button>
        <button id="copyBG" class="ghost">복사</button>
      </div>
      <div id="bgResult" class="list" style="margin-top:8px"></div>
      <details style="margin-top:10px">
        <summary class="muted">기본 질문 보기 / 수정</summary>
        <ul id="bgPreview"></ul>
      </details>
    </section>

    <!-- 키워드 토론 -->
    <section class="card">
      <h2>2) 키워드 토론 주제 뽑기</h2>
      <div class="row">
        <button id="pickKW2">무작위 2개</button>
        <button id="pickKW1" class="ghost">무작위 1개</button>
        <button id="copyKW" class="ghost">복사</button>
      </div>
      <div id="kwResult" class="list" style="margin-top:8px"></div>
      <details style="margin-top:10px">
        <summary class="muted">기본 키워드/질문 보기</summary>
        <ul id="kwPreview"></ul>
      </details>
    </section>

    <!-- 조 섞기 -->
    <section class="card">
      <h2>3) 조 섞기 (4인 1조)</h2>
      <div class="grid two">
        <div>
          <label class="muted">참여자 (줄바꿈으로 구분)</label>
          <textarea id="names" rows="8"></textarea>
          <div class="row" style="margin-top:8px">
            <button id="shuffle">섞어서 배정</button>
            <button id="copyTeams" class="ghost">결과 복사</button>
          </div>
          <p class="muted">※ 인원수 4로 나누어 떨어지지 않으면 마지막 조는 3명으로 구성됩니다.</p>
        </div>
        <div>
          <div id="teams"></div>
        </div>
      </div>
    </section>

    <p class="muted">© 생각의 바다 — 심플 버전</p>
  </div>

  <script>
    // ===== 데이터 =====
    const BG = [
      ["평생 하루에 3시간만 자고 체력 풀충전","하루에 12시간 자야 겨우 버팀"],
      ["친구와 1년 동안 연락 두절","매일 1시간 통화"],
      ["내가 사랑하는 사람과만 남는 세상","나를 사랑하는 사람과만 남는 세상"],
      ["10년간 같은 도시에서 안정적으로 살기","3년마다 새로운 나라로 이사"],
      ["모두가 내 생각을 읽음","내가 모두의 생각을 읽음"],
      ["월 300, 시간 자유 X","월 150, 시간 완전 자유"],
      ["평생 술/카페인 금지","평생 SNS 금지"],
      ["과거로 1번 시간여행","미래로 1번 시간여행"],
    ];

    const KW = [
      {name:'행복', qs:['행복은 돈으로 살 수 있나요?','가장 최근의 소소한 행복은?']},
      {name:'돈', qs:['돈은 자유를 주나요, 구속하나요?','얼마가 있으면 “충분”한가요?']},
      {name:'자유', qs:['자유는 무엇의 부재인가요?','자유와 책임의 균형은?']},
      {name:'관계', qs:['관계가 나를 구속한다고 느낄 때는?','좋은 관계의 최소조건은?']},
      {name:'죽음', qs:['죽음 인식이 삶을 어떻게 바꾸나요?','임종 때 가장 후회할 일은?']},
      {name:'성장', qs:['성장의 기준은 무엇인가요?','정체기에서의 대처는?']},
    ];

    // ===== 유틸 =====
    const $ = (sel, root=document) => root.querySelector(sel);
    function shuffleArray(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }
    function copyText(t){ navigator.clipboard.writeText(t).then(()=> alert('복사 완료!')); }

    // ===== 밸런스게임 =====
    function renderBGPreview(){
      const ul = $('#bgPreview'); ul.innerHTML='';
      BG.forEach((q,i)=>{ const li=document.createElement('li'); li.textContent = `Q${i+1}. ${q[0]}  vs  ${q[1]}`; ul.appendChild(li); });
    }
    function pickBG(n=1){
      const picks = shuffleArray(BG).slice(0,n);
      const holder = $('#bgResult'); holder.innerHTML='';
      picks.forEach(([a,b],i)=>{
        const div=document.createElement('div'); div.className='chip';
        div.textContent = `Q${i+1}: ${a}  vs  ${b}`;
        holder.appendChild(div);
      });
      return picks.map(([a,b],i)=>`Q${i+1}: ${a} vs ${b}`).join('
');
    }

    // ===== 키워드 =====
    function renderKWPreview(){
      const ul = $('#kwPreview'); ul.innerHTML='';
      KW.forEach((k,i)=>{
        const li=document.createElement('li');
        li.innerHTML = `<strong>${k.name}</strong> — ${k.qs.join(' / ')}`;
        ul.appendChild(li);
      });
    }
    function pickKW(n=2){
      const picks = shuffleArray(KW).slice(0,n);
      const holder = $('#kwResult'); holder.innerHTML='';
      picks.forEach((k)=>{
        const div=document.createElement('div'); div.className='chip';
        div.textContent = `${k.name}: ${k.qs[0]}`;
        holder.appendChild(div);
      });
      return picks.map(k=>`${k.name}: ${k.qs.join(' / ')}`).join('
');
    }

    // ===== 조 섞기 (4인 1조) =====
    const DEFAULT_NAMES = [
      '유승빈','김상권','권동국','박유정','변서호','손가은','심원섭','이이강','이주은','정용진','최승아','하경덕','오승빈','유진','이명비','이종화','김환희','신재민','최유리'
    ];

    function groupByFour(list){
      const shuffled = shuffleArray(list.filter(x=>x && x.trim()));
      const teams=[]; for(let i=0;i<shuffled.length;i+=4){ teams.push(shuffled.slice(i,i+4)); }
      return teams;
    }

    function renderTeams(teams){
      const root = $('#teams'); root.innerHTML='';
      teams.forEach((t,idx)=>{
        const box=document.createElement('div'); box.className='card';
        const title=document.createElement('div'); title.innerHTML = `<strong>${idx+1}조</strong> <span class="muted">(${t.length}명)</span>`;
        const ul=document.createElement('ul'); t.forEach(n=>{ const li=document.createElement('li'); li.textContent=n; ul.appendChild(li); });
        box.appendChild(title); box.appendChild(ul); root.appendChild(box);
      });
      if(teams.length && teams[teams.length-1].length!==4){
        const p=document.createElement('p'); p.className='muted';
        p.textContent='마지막 조는 3명입니다. 필요 시 진행자/게스트를 추가하거나 조 합치기를 고려하세요.';
        root.appendChild(p);
      }
    }

    // ===== 이벤트 바인딩 =====
    window.addEventListener('DOMContentLoaded', ()=>{
      $('#names').value = DEFAULT_NAMES.join('
');
      renderBGPreview();
      renderKWPreview();

      $('#pickBG').addEventListener('click', ()=> pickBG(1));
      $('#pickBG3').addEventListener('click', ()=> pickBG(3));
      $('#copyBG').addEventListener('click', ()=> copyText($('#bgResult').textContent.trim()));

      $('#pickKW2').addEventListener('click', ()=> pickKW(2));
      $('#pickKW1').addEventListener('click', ()=> pickKW(1));
      $('#copyKW').addEventListener('click', ()=> copyText($('#kwResult').textContent.trim()));

      $('#shuffle').addEventListener('click', ()=>{
        const names = $('#names').value.split(/
|,|;/).map(x=>x.trim()).filter(Boolean);
        const teams = groupByFour(names);
        renderTeams(teams);
      });
      $('#copyTeams').addEventListener('click', ()=>{
        const boxes = Array.from($('#teams').querySelectorAll('.card'));
        if(!boxes.length){ alert('먼저 섞기를 눌러 팀을 만들어요!'); return; }
        const lines = boxes.map((box,i)=>{
          const who = Array.from(box.querySelectorAll('li')).map(li=>li.textContent).join(', ');
          const cnt = box.querySelector('.muted').textContent.replace(/[()명]/g,'');
          return `${i+1}조 (${cnt}명): ${who}`;
        }).join('
');
        copyText(lines);
      });
    });
  </script>
</body>
</html>
